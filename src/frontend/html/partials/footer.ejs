<% if (typeof isAuthenticated !== 'undefined' && isAuthenticated) { %>
    <% if (req.session.user) { %>


        <!-- Normal Kullanıcı Alt Çubuk -->
        <div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 z-10">
            <div class="grid h-16 max-w-lg grid-cols-2 mx-auto font-medium">
                <!-- Ana Sayfa Butonu -->
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                    </svg>
                    <span class="text-sm text-blue-600 dark:text-blue-500">Ana sayfa</span>
                </button>
                
                <!-- Profil Butonu -->
                <button id="open-profile-modal" type="button" data-modal-target="profile-modal" data-modal-toggle="profile-modal" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <% if (user2.photo) { %>
                        <%
                            // Buffer'ı base64 formatına çevir
                            var photoBase64 = user2.photo.toString('base64');
                            var photoDataUrl = `data:image/png;base64,${photoBase64}`;
                        %>
                        <img class="w-10 h-10 rounded-full" src="<%= photoDataUrl %>" alt="<%= user2.username %> image">
                    <% } else { %>
                        <img class="w-10 h-10 rounded-full" src="../../img/pp.png" alt="<%= user2.username %> image">
                    <% } %>
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500"><%= user2.username %></span>
                </button>

            </div>
        </div>


        <script>
            document.addEventListener('DOMContentLoaded', () => {
                const modalProfileToggle = document.querySelector('[data-modal-toggle="profile-modal"]');
                const openProfileModalLink = document.getElementById('open-profile-modal');

                // tıklama olayı
                if (openProfileModalLink) {
                    openProfileModalLink.addEventListener('click', (event) => {
                        event.preventDefault(); // Sayfanın yenilenmesini engelliyor
                        const modalProfile = document.getElementById('profile-modal');
                        if (modalProfile) {
                            modalProfile.classList.remove('hidden'); // Modal'i görünür yapıyor
                        }
                    });
                } else {
                    console.error('Tıklanma hatası.');
                }
            });
        </script>
        

    <% } else if (req.session.ogrenci) { %>
        <!-- Öğrenci Alt Çubuk -->
        <div class="fixed bottom-0 left-0 w-full bg-white border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600 z-10">
            <div class="grid h-16 max-w-lg grid-cols-2 mx-auto font-medium">
                <!-- Ana Sayfa Butonu -->
                <button type="button" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <svg class="w-5 h-5 mb-2 text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="m19.707 9.293-2-2-7-7a1 1 0 0 0-1.414 0l-7 7-2 2a1 1 0 0 0 1.414 1.414L2 10.414V18a2 2 0 0 0 2 2h3a1 1 0 0 0 1-1v-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v4a1 1 0 0 0 1 1h3a2 2 0 0 0 2-2v-7.586l.293.293a1 1 0 0 0 1.414-1.414Z"/>
                    </svg>
                    <span class="text-sm text-blue-600 dark:text-blue-500">Ana sayfa</span>
                </button>
                
                <!-- Profil Butonu -->
                <a href="/auth/ogrenci-logout" class="inline-flex flex-col items-center justify-center px-5 hover:bg-gray-50 dark:hover:bg-gray-800 group">
                    <img class="w-10 h-10 rounded-full" src="../img/pp.png" alt="Rounded avatar">
                    <span class="text-sm text-gray-500 dark:text-gray-400 group-hover:text-blue-600 dark:group-hover:text-blue-500"><%= ogrenci.username %></span>
                </a>
            </div>
        </div>
    <% } %>
<% } else { %>
    <!-- Oturum açılmadıysa -->
     <!-- Alt Bilgi -->
<footer class="fixed bottom-0 left-0 w-full shadow dark:bg-gray-900">
    <div class="text-center mx-auto p-2">
        <hr class="py-2 border-gray-800 sm:mx-auto dark:border-gray-800" />
        <span class="block text-sm text-gray-500 sm:text-center dark:text-gray-400">
            © 2024
            <a href="https://botcuk.com.tr/dev" class="hover:underline">Power By Herzane</a>
        </span>
    </div>
</footer>
<% } %>










      <script src="../../js/renderer.js"></script>
      <script src="../../js/errorControl.js"></script>